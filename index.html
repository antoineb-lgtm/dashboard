<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard Antoine</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f9; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        h2 { color: #2c3e50; text-align: center; }
        .card { 
            background: white; border-radius: 10px; padding: 15px; 
            margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
            border-left: 6px solid #2196F3; 
        }
        .client { font-size: 1.2em; font-weight: bold; color: #33475b; }
        .valeur { color: #2ecc71; font-weight: bold; margin: 5px 0; }
        .etape { background: #eaf0f6; padding: 3px 8px; border-radius: 4px; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ðŸš€ Mon Pipeline Antoine</h2>
        <div id="deals-list">Chargement des deals en cours...</div>
    </div>

    <script>
        // TON URL DE SCRIPT GOOGLE (Celle qui affiche le texte brut)
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzq6VhfPF2Ie0QSPtTmXva1uQw--aa-a6V_zFEg5AAg6eiMq_pWMXf7r8krvD1cZHrNKw/exec';

        async function getDeals() {
            try {
                const response = await fetch(SCRIPT_URL, { redirect: 'follow' });
                const deals = await response.json();
                const container = document.getElementById('deals-list');
                container.innerHTML = '';

                deals.forEach(deal => {
                    container.innerHTML += `
                        <div class="card">
                            <div class="client">${deal.client}</div>
                            <div class="valeur">${deal.valeur}</div>
                            <span class="etape">${deal.etape}</span>
                        </div>
                    `;
                });
            } catch (error) {
                document.getElementById('deals-list').innerText = 'Erreur de connexion avec Google Script.';
            }
        }
        getDeals();
    </script>
</body>
</html>
